IiIiCuWFpeWPo++8miPlsI/nqIvluo86Ly/miYDmnInlpbPnlJ8vS25BVjBKQmJOamR4YllyCm5hbWU65bCP56iL5bqP5omA5pyJ5aWz55SfCmV4cG9ydCBzeW5zPeWkh+azqCNhdXRob3JpemF0aW9uI0FjY2Vzc1Rva2VuCmNyb246IDAgMCw1ICogKiAqCiIiIgppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IG9zCmltcG9ydCBzeXMKaW1wb3J0IHRpbWUKaW1wb3J0IHJhbmRvbQoKZGVmIHNpZ25pbihhdXRoKToKICAgICIiIgogICAg562+5Yiw5Yqf6IO9CiAgICAiIiIKICAgIHNpZ25pbl91cmwgPSAiaHR0cHM6Ly83Lm1laW9uZXRlY2guY29tL2FwaS9vcGVyYXRlL3d4L3JlY29yZC9zaWduSW4iCiAgICBoZWFkZXJzID0gewogICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjIuMC4wLjAgU2FmYXJpLzUzNy4zNiBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBOZXRUeXBlL1dJRkkgTWluaVByb2dyYW1FbnYvV2luZG93cyBXaW5kb3dzV2VjaGF0L1dNUEYgV2luZG93c1dlY2hhdCgweDYzMDkwYzBmKVhXRUIvMTEyNzUnLAogICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgJ2F1dGhvcml6YXRpb24nOiBhdXRoLAogICAgfQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHNpZ25pbl91cmwsIGhlYWRlcnM9aGVhZGVycykKICAgIHJlc3VsdCA9IHJlc3BvbnNlLmpzb24oKQogICAgaWYgcmVzdWx0LmdldCgnY29kZScpID09ICIwMDAiOgogICAgICAgIHByaW50KGYi4piB77iP562+5Yiw77ya5oiQ5YqfIikKICAgIGVsc2U6CiAgICAgICAgcHJpbnQoZiLimIHvuI/nrb7liLDvvJp7cmVzdWx0LmdldCgnbWVzc2FnZScpfSIpCgpkZWYgdmlld2N1c3QoYXV0aCwgQWNjZXNzVG9rZW4pOgogICAgIiIiCiAgICDmtY/op4jku7vliqHlip/og70KICAgICIiIgogICAgdmlld2N1c3RfdXJsID0gImh0dHBzOi8vNy53YXdvLmNjL2FwaS90YXNrL3d4L3ZlcjIvdGFzay9kb25lIgogICAgaGVhZGVycyA9IHsKICAgICAgICAndXNlci1hZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTIyLjAuMC4wIFNhZmFyaS81MzcuMzYgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgTmV0VHlwZS9XSUZJIE1pbmlQcm9ncmFtRW52L1dpbmRvd3MgV2luZG93c1dlY2hhdC9XTVBGIFdpbmRvd3NXZWNoYXQoMHg2MzA5MGMwZilYV0VCLzExMjc1JywKICAgICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLAogICAgICAgICdhdXRob3JpemF0aW9uJzogYXV0aCwKICAgICAgICAnQWNjZXNzVG9rZW4nOiBBY2Nlc3NUb2tlbiwKICAgIH0KICAgIGRhdGEgPSB7InBhdGgiOiIvY291cnNlLWJvZHkvcGFnZXMvbWVtYmVySG9tZTIvbWVtYmVySG9tZTIifQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHZpZXdjdXN0X3VybCwgaGVhZGVycz1oZWFkZXJzLCBqc29uPWRhdGEpCiAgICByZXN1bHQgPSByZXNwb25zZS5qc29uKCkKICAgIGlmIHJlc3VsdC5nZXQoJ2NvZGUnKSA9PSAiMDAwIjoKICAgICAgICBwcmludChmIuKYge+4j+a1j+iniO+8muS7u+WKoeWujOaIkCIpCiAgICBlbHNlOgogICAgICAgIHByaW50KGYi4piB77iP5rWP6KeI77yae3Jlc3VsdC5nZXQoJ21lc3NhZ2UnKX0iKQoKZGVmIHNjb3JlKGF1dGgsIEFjY2Vzc1Rva2VuKToKICAgICIiIgogICAg5p+l6K+i56ev5YiG5Yqf6IO9CiAgICAiIiIKICAgIHNjb3JlX3VybCA9ICJodHRwczovLzcud2F3by5jYy9hcGkvc2NvcmUvd3gvc2NvcmUvcXVlcnlBbW91bnQiCiAgICBoZWFkZXJzID0gewogICAgICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMjIuMC4wLjAgU2FmYXJpLzUzNy4zNiBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBOZXRUeXBlL1dJRkkgTWluaVByb2dyYW1FbnYvV2luZG93cyBXaW5kb3dzV2VjaGF0L1dNUEYgV2luZG93c1dlY2hhdCgweDYzMDkwYzBmKVhXRUIvMTEyNzUnLAogICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgJ2F1dGhvcml6YXRpb24nOiBhdXRoLAogICAgICAgICdBY2Nlc3NUb2tlbic6IEFjY2Vzc1Rva2VuLAogICAgfQogICAgdHJ5OgogICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHNjb3JlX3VybCwgaGVhZGVycz1oZWFkZXJzKQogICAgICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoKSAgIyDmo4Dmn6Xor7fmsYLmmK/lkKbmiJDlip8KICAgICAgICByZXN1bHQgPSByZXNwb25zZS5qc29uKCkKICAgICAgICBpZiByZXN1bHQuZ2V0KCdjb2RlJykgPT0gIjAwMCI6CiAgICAgICAgICAgIHByaW50KGYi4piB77iP56ev5YiG77yae3Jlc3VsdC5nZXQoJ2RhdGEnKX0iKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KGYi4piB77iP56ev5YiG77yae3Jlc3VsdC5nZXQoJ21lc3NhZ2UnKX0iKQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KGYi6K+35rGC6ZSZ6K+v77yae2V9IikKCmRlZiBtYWluKCk6CiAgICAiIiIKICAgIOS4u+WHveaVsO+8jOaJp+ihjOetvuWIsOOAgea1j+iniOS7u+WKoeWSjOafpeivouenr+WIhgogICAgIiIiCiAgICBpZiBvcy5lbnZpcm9uLmdldCgic3lucyIpOgogICAgICAgIGNrID0gb3MuZW52aXJvbi5nZXQoInN5bnMiKQogICAgZWxzZToKICAgICAgICBjayA9ICIiCiAgICAgICAgaWYgY2sgPT0gIiI6CiAgICAgICAgICAgIHByaW50KCLor7forr7nva7lj5jph48iKQogICAgICAgICAgICBzeXMuZXhpdCgpCiAgICBja19ydW4gPSBjay5zcGxpdCgnXG4nKQogICAgcHJpbnQoZiJ7JyAnICogMTB96qeB4Ly6IOaJgOacieC8kuWls+eUnyDgvLvqp4JcbiIpCiAgICBmb3IgaSwgY2tfcnVuX24gaW4gZW51bWVyYXRlKGNrX3J1biwgc3RhcnQ9MSk6CiAgICAgICAgcHJpbnQoZidcbi0tLS0tLS0tLS0tIO2gvO29uui0puWPt+OAkHtpfS97bGVuKGNrX3J1bil944CR5omn6KGM7aC87b26IC0tLS0tLS0tLS0tJykKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNrX3J1bl9udW0gPSBja19ydW5fbi5zcGxpdCgnIycpCiAgICAgICAgICAgIGlkID0gY2tfcnVuX251bVswXQogICAgICAgICAgICBpZCA9IGlkWzozXSArICIqKioqKiIgKyBpZFstMzpdCiAgICAgICAgICAgIGF1dGggPSBja19ydW5fbnVtWzFdCiAgICAgICAgICAgIEFjY2Vzc1Rva2VuID0gY2tfcnVuX251bVsyXSAgIyDnoa7kv53ov5nph4zmraPnoa7ojrflj5YgQWNjZXNzVG9rZW4KICAgICAgICAgICAgcHJpbnQoZiLtoL3ts7HvvJp7aWR9IikKICAgICAgICAgICAgc2lnbmluKGF1dGgpCiAgICAgICAgICAgIHZpZXdjdXN0KGF1dGgsIEFjY2Vzc1Rva2VuKQogICAgICAgICAgICB0aW1lLnNsZWVwKDUpCiAgICAgICAgICAgIHNjb3JlKGF1dGgsIEFjY2Vzc1Rva2VuKSAgIyDnoa7kv53ov5nph4zmraPnoa7kvKDpgJIgQWNjZXNzVG9rZW4KICAgICAgICAgICAgdGltZS5zbGVlcChyYW5kb20ucmFuZGludCgxLCAyKSkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGUpCgogICAgcHJpbnQoZidcbi0tLS0tLS0tLS0tIO2gvO2+iiDmiacg6KGMICDnu5Mg5p2fIO2gvO2+iiAtLS0tLS0tLS0tLScpCgppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgbWFpbigp
